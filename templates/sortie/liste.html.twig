{% extends 'base.html.twig' %}

{% block title %}Les Sorties{% endblock %}

{% block body %}
    <div class="container mt-4">
        <h2 class="text-center mb-4">Les Sorties !</h2>

        {# Formulaire de recherche #}
        <div class="card mb-4">
            <div class="card-header">
                <h3 class="card-title">Rechercher des sorties</h3>
            </div>
            <div class="card-body">
                {{ form_start(rechercheForm, {'attr': {'id': 'filter-form'}}) }}
                <div class="row">
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.nom) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.dateDebut) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.organisateur) }}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.participants) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.nonParticipants) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.sorties) }}
                    </div>
                    <div class="col-md-4">
                        {{ form_row(rechercheForm.lieu) }}
                    </div>
                </div>
                <div class="text-center mt-3">
                    {{ form_row(rechercheForm.search, {'attr': {'class': 'btn btn-primary'}}) }}
                </div>
                {{ form_end(rechercheForm) }}
            </div>
        </div>

        <div class="table-responsive" >
            <table class="table table-striped table-bordered text-center" >
                <thead class="table-dark">
                <tr>
                    <th>Nom de la sortie</th>
                    <th>Date de la sortie</th>
                    <th>Clôture</th>
                    <th>Inscrits / Places</th>
                    <th>État</th>
                    <th>Inscrit</th>
                    <th>Organisateur</th>
                    <th>Actions</th>
                </tr>
                </thead>
                <tbody  id="sorties-container">
                    {% include 'sortie/_liste.html.twig' %}
                </tbody>
            </table>
        </div>
    </div>
    <script>
        // document.addEventListener('DOMContentLoaded', function () {
        //     const form = document.querySelector('#filter-form');
        //     // Assurez-vous d'avoir le bon ID
        //     form.addEventListener('submit', function (e) {
        //         e.preventDefault();
        //         const formData = new FormData(form);
        //         fetch(form.action, {
        //             method: form.method,
        //             body: formData,
        //             headers: {
        //                 'X-Requested-With': 'XMLHttpRequest'
        //             }
        //         })
        //             .then(response => response.text())
        //             .then(html => {
        //                 document.querySelector('#sorties-container').innerHTML = html;
        //             })
        //             .catch(error => console.error('Erreur:', error));
        //     });
        // });
    </script>

{% endblock %}