{% extends 'base.html.twig' %}

{% block title %}Participant{% endblock %}

{% block body %}
    <h1>Profil de {{ participant.pseudo }}</h1>

    <table class="table">
        <tbody>
        <tr>
            <th>Image</th>
            <td>
                <!-- Correct if the images are stored in 'public/img/photoProfil' -->
                <img src="{{ asset('img/photoProfil' ~ participant.filename) }}" alt="Image de profil" width="150" height="150">
            </td>
        </tr>
        <tr>
            <th>Prénom</th>
            <td>{{ participant.prenom }}</td>
        </tr>
        <tr>
            <th>Nom</th>
            <td>{{ participant.nom }}</td>
        </tr>
        <tr>
            <th>Téléphone</th>
            <td>{{ participant.telephone }}</td>
        </tr>
        <tr>
            <th>Email</th>
            <td>{{ participant.email }}</td>
        </tr>
        <tr>
            <th>Ville de rattachement</th>
            <td>{{ participant.site.nomSite }}</td>
        </tr>
        </tbody>
    </table>

    {% if participant.id== app.user.id %}

<h3>Historique des sorties</h3>

<table class="table">
    <thead class="table-dark">
    <tr>
        <th>Date de la sortie</th>
        <th>Nom de la sortie</th>
        <th>Organisateur</th>
        <th>Site organisateur</th>
        <th>Ville</th>
        <th>Lieu</th>
        <th>Etat de la sortie</th>

    </tr>
    </thead>
    <tbody>
    {% for detailSortie in detailSorties %}
        <tr>
            <td>{{ detailSortie.sortie_date.format('d/m/Y à H:i') }} </td>
            <td>{{ detailSortie.sortie_nom }}</td>
            <td><a type="button" class="btn btn-outline-secondary" href="{{ path('participant_detail', {'id': detailSortie.sortie_organisateur_id}) }}">{{ detailSortie.sortie_organisateur }}</td>
            <td>{{ detailSortie.site_nom }}</td>
            <td>{{ detailSortie.ville_nom }}</td>
            <td>{{ detailSortie.lieu_nom }}</td>
            <td>{{ detailSortie.etat_libelle }}</td>
        </tr>

    {% endfor %}
    </tbody>
</table>

{% endif %}

    <div class="button-container">
    <a href="{{ path('sortie_liste') }}" class="btn btn-lg btn-success">Retour</a>

        {% if app.user and participant.id == app.user.id %}
            <a href="{{ path('participant_update', {'id': participant.id}) }}" class="btn btn-lg btn-success">Modifier mon profil</a>
        {% endif %}
    </div>

    {#<a href="{{ path('participant_detail', {'id': participant.id}) }}">edit</a>#}

{#    <a href="{{ path('edit', {'id': participant.id}) }}">edit</a>#}

{#    {{ include('participant/supprimer.html.twig') }}#}
{% endblock %}
